{% extends 'master.html' %}
 
{% block contentsection %}
  <div class="mb-4"><h4>Leads</h4></div> 
  

{% include "message_show.html" %}

<div class="row">
  <div class="col-sm-12 col-lg-4 mb-4">
    <div class="card card-border-shadow-warning h-100">
      <div class="card-body">
        <div class="d-flex align-items-center mb-2 pb-1">
          <div class="avatar me-2">
            <span class="avatar-initial rounded bg-label-warning"><i class="fa-solid fa-clipboard-question"></i></span>
          </div>
          <h4 class="ms-1 mb-0"> {{total_inquiries}}</h4>
        </div>
        <p class="mb-1">Total Leads</p>
      </div>
    </div>
  </div>

  <div class="col-sm-12 col-lg-4 mb-4">
    <div class="card card-border-shadow-primary h-100">
      <div class="card-body">
        <div class="d-flex align-items-center mb-2 pb-1">
          <div class="avatar me-2">
            <span class="avatar-initial rounded bg-label-success"><i class="fa-solid fa-person-circle-plus"></i></span>
          </div>
          <h4 class="ms-1 mb-0"> {{total_conversion}}</h4>
        </div>
        <p class="mb-1">Total Admission</p>
      </div>
    </div>
  </div>

  <div class="col-sm-12 col-lg-4 mb-4">
    <div class="card card-border-shadow-primary h-100">
      <div class="card-body">
        <div class="d-flex align-items-center mb-2 pb-1">
          <div class="avatar me-2">
            <span class="avatar-initial rounded bg-label-primary"><i class="fa-regular fa-square-check"></i></span>
          </div>
          <h4 class="ms-1 mb-0"> {{percentage}}%</h4>
        </div>
        <p class="mb-1">Conversion Percentage</p>
      </div>
    </div>
  </div>
</div>

<!-- DataTable with Buttons -->
<div class="card">
  <div class="card-body">
    <div class="d-flex justify-content-between align-items-center">
      <div class="myheadfont">{{ title }} Data</div>
</div>
<div class="btn-toolbar mb-3 mt-2" role="toolbar" aria-label="Toolbar with button groups">
  <div class="btn-group me-2" role="group" aria-label="First group">
    <a href="{% url 'export_data' %}?model_name=inquiries"><button  type="button" class="btn btn-outline-primary mt-2"><i class="fa-solid fa-file-export"></i></button></a>
  <div class="input-group mt-2 ms-2">
    <div class="input-group-text" id="btnGroupAddon"><i class="fa-solid fa-magnifying-glass"></i></div>
    <input type="text" id="searchInput" class="form-control" style="padding: 2px;width: 100px !important;" placeholder="Search..." aria-label="Input group example" aria-describedby="btnGroupAddon">
    <button id="searchButton" class="btn btn-primary mt-2" style="display: none;">Search</button>
  </div>
  </div>
  </div>
    <form action="{% url 'delete_inquiry' %}" method="POST"> 
    {% csrf_token %}        
    <div class="card-datatable table-responsive pt-0 mt-3">
        <table id="data-table" class="display table table-bordered" style="width:100%">
            <thead>
                <tr>
                    <th><input type="checkbox" class="form-check-input" name="selectionall" /></th>
                    <th>Name</th>
                    <th>Phn</th>
                    <th>Subject</th>

                    <th>Std</th>
                    <th>Guardian_Phn</th>
                    <th>Email</th>
                    <th>DOB</th>
                    <th>Gender</th>
                    
                    <th>School_Name</th>
                    <th>Std_&_Marks</th>
                    <th>Guardian_Name</th>
                    
                    <th>Guardian_Email</th>
                    <th>Guardian_Profession</th>
                    <th>Address</th>
                    <th>Know_From</th>
                    <th>Admisssion</th>
                </tr>
            </thead>
            <tbody>
              {% for data in inquiries_data %}
              <tr>
                  <td><input type="checkbox" class="form-check-input" value="{{ data.inq_id }}" name="selection" /></td>
                  <td>{{ data.inq_name }} {{ data.inq_lastname }}</td>
                  <td>{{ data.inq_contact }}</td>
                  <td>{{ data.inq_subjects }}</td>
                  <td>{{ data.inq_std }}</td>
                  <td>{{ data.inq_guardian_number }}</td>
                  <td>{{ data.inq_email }}</td>
                  <td>{{ data.inq_dob }}</td>
                  <td>{{ data.inq_gender }}</td>
                  <td>{{ data.inq_schoolname }}</td>
                  <td>{{ data.inq_last_std_and_marks }}</td>
                  <td>{{ data.inq_guardian_name }}</td>
                  <td>{{ data.inq_guardian_email }}</td>
                  <td>{{ data.inq_guardian_profession }}</td>
                  <td>{{ data.inq_address }}</td>
                  <td>{{ data.inq_howuknow }}</td>
                  <td>
                      {% if data.inq_email in email_ids %}
                          <p>Done</p>
                      {% else %}
                          <a href="{% url 'insert_update_students' %}?inq_id={{ data.inq_id }}">Admission</a>
                      {% endif %}
                  </td>
              </tr>
              {% endfor %}              
            </tbody>
        </table>
    </div>  
  <!-- Modal -->
  <div class="modal fade" id="confirmdeletemodel" tabindex="-1" aria-labelledby="confirmdeletemodelLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="confirmdeletemodelLabel"><i class="fa-solid fa-trash me-2"></i> Confirm Delete</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          Are you sure you want to delete this data ..?<br>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-danger"><i class="fa-solid fa-trash me-2"></i> Delete</button>
        </div>
      </div>
    </div>
  </div>
    
   
  <button type="button" class="btn btn-primary" style="position: fixed;bottom: 20px;right: 20px;" id="selected" name="delbtn" data-bs-toggle="modal" data-bs-target="#confirmdeletemodel"><i class="fa-solid fa-trash me-2"></i> Delete</button>

  </form>
  </div>
  </div>

  <!--/ DataTable with Buttons -->
{% endblock %}





 


          
